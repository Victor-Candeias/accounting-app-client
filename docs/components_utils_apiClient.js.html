<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/utils/apiClient.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/utils/apiClient.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// apiHelper.js
import axios from "axios";
import { TOKEN_KEY, GetSessionStorageItem } from "./utils";

/**
 * @namespace components
 */

/**
 * @group utils
 */
/**
 * @memberof components.apiClient
 * @enum {string}
 * Enum-like object for HTTP methods.
 */
export const HttpMethod = {
  GET: "get",
  POST: "post",
  PUT: "put",
  DELETE: "delete",
  PATCH: "patch",
};

/**
 * Utility function for handling axios requests.
 *
 * @memberof components.makeRequest
 * @param {string} method - The HTTP method to use for the request. Must be one of 
 *                          the values defined in HttpMethod.
 * @param {string} url - The URL to which the request is sent.
 * @param {Object|null} [data=null] - The data to be sent as the request body, 
 *                                     applicable for POST requests. Default is null.
 * @param {Object|null} [params=null] - The query parameters to be sent with the 
 *                                       request, applicable for GET requests. Default is null.
 * @returns {Promise&lt;Object>} The response data from the request.
 * @throws {Error} Throws an error if the HTTP method is invalid or if the request fails.
 */
export default async function makeRequest(
  method,
  url,
  data = null,
  params = null
) {
  // Check if the method is a valid enum value
  if (!Object.values(HttpMethod).includes(method)) {
    throw new Error(`Invalid HTTP method: ${method}`);
  }

  console.log("method=" + method);
  console.log("url=" + url);
  console.log("data=" + data);
  console.log("params=" + params);

  // Set up the headers, including the Authorization token if provided
  const token = GetSessionStorageItem(TOKEN_KEY);

  const headers = token
    ? { Authorization: `Bearer ${token.token}` } // Add Bearer token to headers
    : {};

  try {
    const response = await axios({
      method: method,
      url: url,
      data: method === HttpMethod.POST ? data : null, // Only include data for POST requests
      headers: headers, // Include headers in the request
      params: params, // Include query parameters for GET requests
    });
    return response.data;
  } catch (error) {
    const msg = `Error making ${method.toUpperCase()} request to ${url}:`;

    console.error(msg, error);

    if (error.status === 404) {
      return [];
    } else {
      throw error;
    }
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="components.chart.module_Chart.html">Chart</a></li><li><a href="components.data.module_Data.html">Data</a></li><li><a href="components.inputData.module_CurrencyInput.html">CurrencyInput</a></li><li><a href="components.login.module_Login.html">Login</a></li><li><a href="components.login.module_LoginNaveBar.html">LoginNaveBar</a></li><li><a href="components.login.module_Register.html">Register</a></li><li><a href="components.module_AccountingApp.html">AccountingApp</a></li><li><a href="components.month.module_Month.html">Month</a></li><li><a href="components.nav-bar.module_NaveBar.html">NaveBar</a></li><li><a href="components.passwordStrengthChecker.module_PasswordStrengthChecker.html">PasswordStrengthChecker</a></li><li><a href="components.resume.module_Resume.html">Resume</a></li><li><a href="components.year.module_Year.html">Year</a></li><li><a href="module-App.html">App</a></li></ul><h3>Namespaces</h3><ul><li><a href="components.html">components</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PrivateRoute">PrivateRoute</a></li><li><a href="global.html#root">root</a></li><li><a href="global.html#rootElement">rootElement</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Wed Oct 23 2024 16:54:27 GMT+0100 (Hora de ver√£o da Europa Ocidental)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
